<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sign Up & Run X Highlighter</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; padding: 20px; }
    .hidden { display: none; }
    input, button { padding: 10px; margin: 10px; }
    .success { color: green; font-weight: bold; }
    .description { margin-bottom: 20px; cursor: pointer; color: blue; text-decoration: underline; }
    .description-content { display: none; text-align: left; margin-top: 10px; }
    .image-container { margin-top: 20px; }

    /* Desktop only: Apply the image size adjustment */
    @media (min-width: 768px) {
      .image-container img {
        max-height: 300px; /* Set the maximum height for the image */
        width: auto; /* Ensure the width scales proportionally */
      }
    }
  </style>
</head>
<body>

  <h2>Sign Up to Access the X Highlighter</h2>
  
  <p class="description" onclick="toggleDescription()">Click here to see the description</p>
  <div id="descriptionContent" class="description-content">
    <p>
      After signing up, you must click "Verify". Then, run the highlighter, and it will send you to X's following page. If it doesn’t work, close the tab (X) and click "Run Highlighter" again. It will highlight people in red.
    </p>
  </div>
  <p>
   Desktop only
  </p>

  <input type="email" id="email" placeholder="Enter your email" required>
  <button onclick="signUp()">Sign Up</button>
  
  <p id="userIdDisplay" class="hidden">
    Your User ID: <span id="userId"></span>
  </p>
  
  <h2>Enter Your User ID to Run the Tool</h2>
  <input type="text" id="verifyUserId" placeholder="Enter your User ID">
  <button onclick="verifyUser()">Verify</button>
  
  <p id="accessGranted" class="hidden success">✅ Access Granted! Click below to run the tool.</p>
  <button id="runTool" class="hidden" onclick="runTool()">Run X Highlighter</button>

  <div class="image-container">
   <img src="https://raw.githubusercontent.com/Numeral2/numerosai/main/adio/Gj1ZUlnXQAEw30W.jpg"
  />
  </div>

  <script>
    const webhookURL = "https://hook.eu2.make.com/6ytrrtr6hapea8k6ek2s5ypiynjoavtd";
    let generatedUserId = "";

    function signUp() {
      const email = document.getElementById("email").value;
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        alert("Please enter a valid email address!");
        return;
      }

      // Generate a unique user ID
      generatedUserId = "X-" + Math.random().toString(36).substr(2, 8).toUpperCase();

      // Send data to Make.com webhook
      fetch(webhookURL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ email: email, userId: generatedUserId })
      }).then(response => {
        if (response.ok) {
          // Display the User ID after successful sign-up
          document.getElementById("userId").innerText = generatedUserId;
          document.getElementById("userIdDisplay").classList.remove("hidden");

          // Auto-fill the User ID in the verification input field
          document.getElementById("verifyUserId").value = generatedUserId;

          alert("Sign-up successful! Your User ID has been generated.");
        } else {
          alert("Error sending data. Try again.");
        }
      });
    }

    function verifyUser() {
      const inputId = document.getElementById("verifyUserId").value;

      // Check if the user has entered a valid ID
      if (!inputId) {
        alert("Please enter your User ID.");
        return;
      }

      // Verify that the input ID matches the generated User ID
      if (inputId === generatedUserId) {
        document.getElementById("accessGranted").classList.remove("hidden");
        document.getElementById("runTool").classList.remove("hidden");
      } else {
        alert("Invalid User ID. Please enter the correct ID.");
      }
    }

    function runTool() {
      // Open Twitter's following page in a new tab
      const newTab = window.open("https://x.com/following", "_blank");

      if (!newTab) {
        alert("Please allow pop-ups for this site.");
        return;
      }

      // Wait for the tab to load, then inject the script
      newTab.onload = function () {
        const script = newTab.document.createElement("script");
        script.src = "https://yourwebsite.com/highlight.js"; // Make sure this file is hosted correctly
        script.async = true;
        newTab.document.body.appendChild(script);
      };
    }

    function toggleDescription() {
      const descriptionContent = document.getElementById("descriptionContent");
      descriptionContent.classList.toggle("description-content");
    }
  </script>

</body>
</html>
